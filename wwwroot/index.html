<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>WebApplicationONE</title>
    <base href="/" />
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="manifest.json" rel="manifest" />
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" />
</head>


<body>
    <app>Loading...</app>

    <div id="blazor-error-ui">
        –û—à–∏–±–∫–∞.
        <a href="" class="reload">–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å.</a>
        <a class="dismiss">üóô</a>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>
    <script>navigator.serviceWorker.register('service-worker.js');</script>

    <script src="https://apis.google.com/js/api.js"></script>

    <script>

        function authenticate() {
            return gapi.auth2.getAuthInstance()
                .signIn({ scope: "https://www.googleapis.com/auth/youtube.force-ssl" })
                .then(function () { console.log("Sign-in successful"); return "true"; },
                    function (err) { console.error("Error signing in", err); return "false"; });
        }

        var lastPl;
        //function loadClient(f) {

        //    lastPl = 'G2CHyuF74R0';
        //    //"AIzaSyApxU38Tke7HtXOarFJAP1pR_O0ATRwy-Q"
        //    gapi.client.setApiKey(f);

        //    return gapi.client.load("https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest")
        //        .then(
        //            function () {
        //                console.log("GAPI client loaded for API");
        //                return "GAPI client loaded for API";
        //            },
        //            function (err) { console.error("Error loading GAPI client for API", err); return "err"; });
        //}
        function loadErrVoid(st, ex) {
            return confirm( st + " –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å ?" + "\n" + "--->" + JSON.stringify(ex));
        }
        function loadErr(st, ex) {
            return "!!!" +confirm( st + " –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å ?").toString() + "--->" + JSON.stringify(ex);
        }

        function loadClient(f) {

            lastPl = 'G2CHyuF74R0';
            //"AIzaSyApxU38Tke7HtXOarFJAP1pR_O0ATRwy-Q"
            try {
                gapi.client.setApiKey(f);
                /*throw new Error('something went wrong');*/
                return gapi.client.load("https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest")
                    .then(
                        function () {
                            console.log("GAPI client loaded for API");
                            return "";
                        },
                        function (err) {
                            console.error("Error loading GAPI client for API 1", err/*.message*/);
                            return loadErr("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 1.", err);
                            /*confirm("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?").toString() + "--->" + JSON.stringify(err);*/
                        });
            } catch (err) {
                console.error("Error loading GAPI client for API 0", err/*.message*/);
                return loadErr("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 2.", err);
                /*return JSON.stringify(e); *//*e.message"e!!!"*/
            }
        }

        /*nextVideoSearch*/
        /*"nextPageToken": string*/
        //window.mkYouTubeIframeAPIReadyLast = function (pl)
        /*function nextVideoS(mo)*/

        window.nextVideoS = function (mo)  {
            return gapi.client.youtube.search.list({
                "part": [
                    "snippet"
                ],
                "maxResults": 50,
                "nextPageToken": mo,
                "type": [
                    "video"]
                ,
                "videoSyndicated": "true"
            })
                .then(
                    function (response) {
                        return JSON.stringify(response);
                    }
                    ,
                    function (err) {
                        console.error("Error loading videoSearch", err);
                        return loadErr("–ü–æ–∏—Å–∫ next –≤—ã–¥–∞–ª –æ—à–∏–±–∫—É.", err);/*"!!!" +confirm("–ü–æ–∏—Å–∫ –≤—ã–¥–∞–ª –æ—à–∏–±–∫—É. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?").toString() + "--->" + err;*//*JSON.stringify(err);*/
                    });
        }

        function videoSearch(more) {
            return gapi.client.youtube.search.list({
                "part": [
                    "snippet"
                ],
                "maxResults": 50,
                "q": more,
                "type": [
                    "video"]
                ,
                "videoSyndicated": "true"
            })
                .then(
                    function (response) {
                        return JSON.stringify(response);
                    }
                    ,
                    function (err) {
                        console.error("Error loading videoSearch", err);
                        return loadErr("–ü–æ–∏—Å–∫ –≤—ã–¥–∞–ª –æ—à–∏–±–∫—É.", err);/*"!!!" +confirm("–ü–æ–∏—Å–∫ –≤—ã–¥–∞–ª –æ—à–∏–±–∫—É. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?").toString() + "--->" + err;*//*JSON.stringify(err);*/
                    });
        }



        function videoDetails(more) {

            return gapi.client.youtube.videos.list({
                "part": [
                    "contentDetails"
                ],
                "id": more

            })
                .then(function (response) {

                    return JSON.stringify(response);
                },
                    function (err) {
                        console.error("Error loading videoDetails", err);
                        return loadErr("–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –≤—ã–¥–∞–ª–∞ –æ—à–∏–±–∫—É.", err);/*loadErr("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?", err*//*);*//*"!!!" + confirm("–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫ –≤—ã–¥–∞–ª–∞ –æ—à–∏–±–∫—É. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?").toString() + "--->" + err;*//*JSON.stringify("contentDetails2");*/
                    });
        }

        gapi.load('client',
            function () { console.log("GAPI load"); });


    </script>

    <script>

        function delCha(cha, opis) {
            n = 0;
            try {
                for (i = n; i < cha.length; i++) {
                    document.getElementById(opis + cha[i]).checked = false;
                }
                return "";
            } catch (err) {
                console.error("Error loading del" + opis+"Cha: " + n, /*n + " --- " +*/ err);
                return loadErr("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–Ω–∞ 2 " + opis+" . –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É. " + n, err);/*confirm("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É").toString();;*/
            }

        };

        function delSvdCha(cha) {  /*try {  }catch (e) { return;; }*/
            n = 0;
            try {
                for (i = n; i < cha.length; i++) {
                    document.getElementById("svd" + cha[i]).checked = false;
                }
                return "";
            } catch (err) {
                console.error("Error loading delSvdCha: " + n, /*n + " --- " +*/ err);
                return loadErr("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–Ω–∞ 1. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É. " + n, err);/*confirm("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É").toString();;*/
            }
        };

        function delPlyCha(cha) {
            n = 0;
            try {
                for (i = n; i < cha.length; i++) {
                    document.getElementById("play" + cha[i]).checked = false;
                }
                return "";
            } catch (err) {
                console.error("Error loading delPlyCha: " + n, /*n + " --- " +*/ err);
                return loadErr("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–Ω–∞ 2. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É. " + n, err);/*confirm("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É").toString();;*/
            }

        };
    </script>

    <script>

        window.mkYouTubeIframeAPIReadyLast = function (pl) {
            try {
                lastPl = pl;

                var tag = document.createElement('script');

                tag.src = "https://www.youtube.com/iframe_api";
                var firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                console.log("mkYouTubeIframeAPIReadyLast");
                return ""; /*"true"*/
            }
            catch (err) {
                console.error("Error loading mkYouTubeIframeAPIReadyLast", err);
                return loadErr("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 3.", err);/*confirm("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É").toString();;*/
                //return "false";
            };
        };

        /*window. =*//*async2*/
        function mkYouTubeIframeAPIReady() {
            try {
                var tag = document.createElement('script');

                tag.src = "https://www.youtube.com/iframe_api";
                var firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                console.log("mkYouTubeIframeAPIReady");
                return ""; /*"true"*/
            }
            catch (err) {
                console.error("Error loading mkYouTubeIframeAPIReady", err);
                return loadErr("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 4.", err);/*confirm("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É").toString();;*/
                //return "false";
            };
        };

        function stopVideo() {
            player.stopVideo();
        }

        var index = 0;
        var videos = [];

        window.playMany = function (yyy) {
            index = 0;
            videos = yyy;

            try {
                player.loadVideoById(videos[index], 0, "large");
                return "";
            }
            catch (err) {
                var vil;
                try { vil = videos[index]; } catch (err2) { vil = " ( --- ) "; }

                console.error("Error loading playMany", err);
                return loadErr("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 5.", err);/*confirm("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É").toString();;*/


                //bigErr(err, "8", vil, "playMany");

                //console.error("Error loading playMany", err);
                //if (loadErrVoid("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 8. " + vil, err)) {
                //    DotNet.invokeMethodAsync('WebApplicationONE', 'ReloadMk');
                //}
                //else {
                //    DotNet.invokeMethodAsync('WebApplicationONE',
                //        'ReloadMkS', "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 8. " + vil + "--->" + JSON.stringify(err));
                //};
                //console.error("Error loading playMany",
                //    index + " --- " + vil + " --- " + err);
                //return confirm("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?").toString();
            }
        }

        window.playOne = function (yyy) {

            try {
                player.loadVideoById(yyy, 0, "large");
                return "";
            }
            catch (err) {

                console.error("Error loading playOne", err);
                return loadErr("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 6.", err);/*confirm("–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É").toString();;*/


                //bigErr(err, "9", yyy, "playOne");
                //console.error("Error loading playOne", err);
                //if (loadErrVoid("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 9. " + vil, err)) {
                //    DotNet.invokeMethodAsync('WebApplicationONE', 'ReloadMk');
                //}
                //else {
                //    DotNet.invokeMethodAsync('WebApplicationONE',
                //        'ReloadMkS', "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 9. " + vil + "--->" + JSON.stringify(err));
                //};

                //console.error("Error loading playOne", yyy + " --- " + err)
                //return confirm("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?").toString();
            }
        }

        //window.mkYouTubeIframeAPIReady = function () {
        //    //try {
        //    return /*await*/  mkYouTubeIframeAPIReady2().then(function (response) {

        //        return JSON.stringify("Eresponse")/*"Error loading videoDetails"*/;
        //    },
        //        function (err) {
        //            console.error("Error loading videoDetails", err);
        //            return JSON.stringify("Error");   //return "!!!" + confirm("–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫ –≤—ã–¥–∞–ª–∞ –æ—à–∏–±–∫—É. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?").toString() + "--->" + err;/*JSON.stringify("contentDetails2");*/
        //        });
        //    //}
        //    //catch (err) {
        //    //    //alert('–ù–∞—á–∞–ª–æ –±–ª–æ–∫–∞ try');   //console.error("Error loading mkYouTubeIframeAPIReady", err);
        //    //    return "false"/*"!!!" +*/ /*confirm("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?").toString() + "--->" + err*/;
        //    //};
        //};

        var player;

        function onYouTubeIframeAPIReady() {
            try {
                console.log("mkYouTubeIframeAPIReady1");
                player = new YT.Player('player', {

                    videoId: lastPl,
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });
                console.log("onYouTubeIframeAPIReady");

                DotNet.invokeMethodAsync('WebApplicationONE', 'BobTrue');

                //return "true";
            }
            catch (err) {

                bigErr(err, "3 ", "onYouTubeIframeAPIReady");

                //console.error("Error loading onYouTubeIframeAPIReady", err);
                //if (loadErrVoid("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 5.", err)) {
                //    DotNet.invokeMethodAsync('WebApplicationONE', 'ReloadMk');
                //}
                //else
                //{
                //    DotNet.invokeMethodAsync('WebApplicationONE',
                //        'ReloadMkS', "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 5."+"--->"+ JSON.stringify(err));
                //};
                //confirm("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?");
            }
        }


        function onPlayerReady(event) {
            try {
                event.target.playVideo();
                //DotNet.invokeMethodAsync('WebApplicationONE', 'BobTrue');
            }
            catch (err) {

                bigErr(err, "2 ", "onPlayerReady");

                //console.error("Error loading onPlayerReady", err);
                //if (loadErrVoid("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 6.", err)) {
                //    DotNet.invokeMethodAsync('WebApplicationONE', 'ReloadMk');
                //}
                //else {
                //    DotNet.invokeMethodAsync('WebApplicationONE',
                //        'ReloadMkS', "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 6." + "--->" +  JSON.stringify(err));
                //};
            }
        }

        //var done = false;

        function onPlayerStateChange(event) {
            try {
                if (event.data === YT.PlayerState.ENDED) {

                    if (index < videos.length - 1) {
                        index = index + 1;
                        event.target.loadVideoById(

                            videos[index], 0, "large");

                    };

                }
            }
            catch (err) {
                var vil;
                try { vil = videos[index]; } catch (err2) { vil = " ( --- ) "; }

                bigErr(err, "1 " + vil, "onPlayerStateChange");

                //console.error("Error loading onPlayerStateChange", err);
                //if (loadErrVoid("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 7. " + vil, err)) {
                //    DotNet.invokeMethodAsync('WebApplicationONE', 'ReloadMk');
                //}
                //else {
                //    DotNet.invokeMethodAsync('WebApplicationONE',
                //        'ReloadMkS', "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ 7. " + vil + "--->" + JSON.stringify(err));
                //};

                //console.error("Error loading onPlayerStateChange",
                //    index + " --- " + vil + " --- " + err);
                //return confirm("–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?").toString();
            }
        }
         
        window.bigErr = function (er, num, /*vil,*/ nam) {

            console.error("Error loading " + nam, er);
            if (loadErrVoid("–û–±—Ä—ã–≤ —Å–≤—è–∑–∏ " + num + ". " /*+ vil*/, er)) {
                DotNet.invokeMethodAsync('WebApplicationONE', 'ReloadMk');
            }
            else {
                DotNet.invokeMethodAsync('WebApplicationONE',
                    'ReloadMkS', "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∏ " + num + ". " /*+ vil*/ + "--->" + JSON.stringify(er));
            };
        }

    </script>

</body>

</html>
